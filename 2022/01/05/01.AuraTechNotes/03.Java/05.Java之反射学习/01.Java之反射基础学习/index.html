<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java之反射基础学习 | 麦溪·在路上</title><meta name="author" content="Frewen.Wang"><meta name="copyright" content="Frewen.Wang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="页面描述"><link rel="shortcut icon" href="/img/frewen_tech.png"><link rel="canonical" href="http://www.frewen.wang/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java之反射基础学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-01-05 00:00:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/frewen_tech.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">858</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">146</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章归类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/page_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="麦溪·在路上"><span class="site-name">麦溪·在路上</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章归类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java之反射基础学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-04T16:00:00.000Z" title="发表于 2022-01-05 00:00:00">2022-01-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-04T16:00:00.000Z" title="更新于 2022-01-05 00:00:00">2022-01-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java之反射基础学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[TOC]</p>
<p>文章参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/607ff4e79a13">https://www.jianshu.com/p/607ff4e79a13</a></p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="动态语言"><a href="#动态语言" class="headerlink" title="动态语言"></a>动态语言</h2><p>针对动态语言，大致认同的一个定义是：“程序运行时，允许改变程序结构或变量类型，这种语言称为动态语言”。反射机制在运行时只能调用methods或改变fields内容，却无法修改程序结构或变量类型。从这个观点看，Perl，Python，Ruby是动态语言，C++，Java，C#不是动态语言。</p>
<h2 id="反射的功能"><a href="#反射的功能" class="headerlink" title="反射的功能"></a>反射的功能</h2><p>对于Java反射，平常工作中虽然经常用到，尤其是一些开源框架的设计中，大量用到注解和反射配合使用，来完成很多动能。</p>
<p>JAVA反射机制，可在运行态直接操作任意类或对象的所有属性和方法，主要有以下几个功能：</p>
<ul>
<li>在运行时获取任意对象所属的类</li>
<li>在运行时构造类的实例对象</li>
<li>在运行时获取或修改类&#x2F;成员的属性</li>
<li>在运行时调用某个类&#x2F;对象的方法</li>
<li>另外还可获取类的其他信息，比如描述修饰符、父类信息等</li>
</ul>
<p>这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。</p>
<h1 id="反射的使用"><a href="#反射的使用" class="headerlink" title="反射的使用"></a>反射的使用</h1><p>我们平时使用Java反射主要涉及两个类(接口)Class， Member等一些基础概念，下面我们就来分别学习这些基础概念</p>
<h2 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h2><p>Class可以说是反射能够实现的基础；注意这里说的Class与class关键字不是同一种东西。class关键字是在声明java类时使用的；而Class 是java JDK提供的一个类,完整路径为 java.lang.Class，本质上与Math, String 或者你自己定义各种类没什么区别。</p>
<p>那Class到底在反射中起到什么作用呢？</p>
<blockquote>
<p>For every type of object, the Java virtual machine instantiates an immutable instance of java.lang.Class which provides methods to examine the runtime properties of the object including its members and type information. Class also provides the ability to create new classes and objects. Most importantly, it is the entry point for all of the Reflection APIs.</p>
</blockquote>
<p>对于每一种类，Java虚拟机都会初始化出一个Class类型的实例，所以我们就可以知道class其实是Class类型的实例。每当我们编写并且编译一个新创建的类就会产生一个对应Class对象，并且这个Class对象会被保存在同名.class文件里。当我们new一个新对象或者引用静态成员变量时，Java虚拟机(JVM)中的类加载器系统会将对应Class对象加载到JVM中，然后JVM再根据这个类型信息相关的Class对象创建我们需要实例对象或者提供静态变量的引用值。</p>
<p>比如创建编译一个People类，那么，JVM就会创建一个People对应Class类的Class实例，这个实例就是People.class，该Class实例保存了People类相关的类型信息，包括属性，方法，构造方法等等，通过这个Class实例可以在运行时访问People对象的属性和方法等。另外通过Class类还可以创建出一个新的People对象。这就是反射能够实现的原因，可以说Class是反射操作的基础。</p>
<p>需要特别注意的是，每个class（注意class是小写，代表普通类）类，无论创建多少个实例对象，在JVM中都对应同一个Class对象。</p>
<h4 id="Class实例的获取"><a href="#Class实例的获取" class="headerlink" title="Class实例的获取"></a>Class实例的获取</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">testGetClass</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1、通过People.class 这种形式</span></span><br><span class="line">    <span class="comment">// 其实这种方式也很好理解，我们都知道People.class是Class类型的实例嘛</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> People.class;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">stringClazz1</span> <span class="operator">=</span> String.class;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">booleanClazz1</span> <span class="operator">=</span> <span class="type">boolean</span>.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2、通过Class.forName的全限定名来获取Class实例</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//反射获取Class对象 一般尽量采用这种形式</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz2</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.frewen.reflect.People&quot;</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">stringClazz2</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.String&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 对于数组比较特殊</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">cDoubleArray</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;[D&quot;</span>);    <span class="comment">//相当于double[].class</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">cStringArray</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;[[Ljava.lang.String;&quot;</span>);   <span class="comment">//相当于String[][].class</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3、通过实例对象的getClass方法</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">peopleClazz3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>().getClass();</span><br><span class="line">    <span class="comment">// 这个是String实例对象的getClass方法</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">stringClazz3</span> <span class="operator">=</span> <span class="string">&quot;HellString&quot;</span>.getClass();</span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">Class</span> <span class="variable">bytesClazz3</span> <span class="operator">=</span> bytes.getClass();</span><br><span class="line">    <span class="comment">//Returns the Class corresponding to the enumeration type E.</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">enumObjValue</span> <span class="operator">=</span> EnumObj.A.getClass();</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; hashSet3 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line">    <span class="comment">//Returns the Class corresponding to java.util.HashSet.</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">hashSetClazz3</span> <span class="operator">=</span> hashSet3.getClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说Class是反射能够实现的基础的另一个原因是：Java反射包java.lang.reflect中的所有类都没有public构造方法，要想获得这些类实例，只能通过Class类获取。所以说如果想使用反射，必须得获得Class对象。</p>
<p>我们从上面的代码可以看出，共有三种获取Class对象的方法：</p>
<h4 id="1、实例化对象的getClass方法（object-getClass-）"><a href="#1、实例化对象的getClass方法（object-getClass-）" class="headerlink" title="1、实例化对象的getClass方法（object.getClass()）"></a>1、实例化对象的getClass方法（object.getClass()）</h4><h4 id="2、-class语法（People-class）"><a href="#2、-class语法（People-class）" class="headerlink" title="2、.class语法（People.class）"></a>2、.class语法（People.class）</h4><p><img src="http://note.youdao.com/yws/res/70076/0F6461896F8B4329B72941708453A38D" alt="image"></p>
<h4 id="3、通过Class-forName-全限定名"><a href="#3、通过Class-forName-全限定名" class="headerlink" title="3、通过Class.forName()全限定名"></a>3、通过Class.forName()全限定名</h4><h4 id="4、基本数据类型TYPE属性"><a href="#4、基本数据类型TYPE属性" class="headerlink" title="4、基本数据类型TYPE属性"></a>4、基本数据类型TYPE属性</h4><p>基本类型，如BOOLEAN，都有TYPE属性，可以得到这个基本类型的类型：</p>
<p><img src="http://note.youdao.com/yws/res/70072/61A99662E02E4FDEB0DE8568C3E5CAA4" alt="image"></p>
<p>另外还有一些反射方法可以获取Class对象，但前提是你已经获取了一个Class对象。<br>有点拗口，比如说你已经获取了一个类的Class对象，就可以通过反射方法获取这个类的父类的Class对象。</p>
<p>Class.getSuperclass()</p>
<p>获得给定类的父类Class</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Class c = people.class.getSuperclass();</span><br><span class="line"></span><br><span class="line">// 类似的还有：</span><br><span class="line">Class.getClasses()</span><br><span class="line"></span><br><span class="line">Class.getDeclaredClasses()</span><br><span class="line"></span><br><span class="line">Class.getDeclaringClass()</span><br><span class="line"></span><br><span class="line">Class.getEnclosingClass()</span><br><span class="line"></span><br><span class="line">java.lang.reflect.Field.getDeclaringClass()</span><br><span class="line"></span><br><span class="line">java.lang.reflect.Method.getDeclaringClass()</span><br><span class="line"></span><br><span class="line">java.lang.reflect.Constructor.getDeclaringClass()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="通过Class获取类修饰符和类型"><a href="#通过Class获取类修饰符和类型" class="headerlink" title="通过Class获取类修饰符和类型"></a>通过Class获取类修饰符和类型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 通过Class获取类的修饰符和类型</span><br><span class="line"> * 我们以HashMap为例，来看一下怎么获取这些信息</span><br><span class="line"> */</span><br><span class="line">private static void testGetClassModifier() &#123;</span><br><span class="line">    // 获取HashMap的Class类型的实例</span><br><span class="line">    Class&lt;?&gt; clazz = HashMap.class;</span><br><span class="line">    //获取类名</span><br><span class="line">    System.out.println(&quot;Class : &quot; + clazz.getCanonicalName());</span><br><span class="line"></span><br><span class="line">    //获取类限定符</span><br><span class="line">    System.out.println(&quot;Class Modifiers : &quot; + Modifier.toString(clazz.getModifiers()));</span><br><span class="line"></span><br><span class="line">    //获取类泛型信息</span><br><span class="line">    TypeVariable[] tv = clazz.getTypeParameters();</span><br><span class="line">    if (tv.length != 0) &#123;</span><br><span class="line">        StringBuilder parameter = new StringBuilder(&quot;Parameters : &quot;);</span><br><span class="line">        for (TypeVariable t : tv) &#123;</span><br><span class="line">            parameter.append(t.getName());</span><br><span class="line">            parameter.append(&quot; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(parameter.toString());</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;  -- No Type Parameters --&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //获取类实现的所有接口</span><br><span class="line">    Type[] genericInterfaces = clazz.getGenericInterfaces();</span><br><span class="line">    if (genericInterfaces.length != 0) &#123;</span><br><span class="line">        StringBuilder interfaces = new StringBuilder(&quot;Implemented Interfaces : &quot;);</span><br><span class="line">        for (Type genericInterface : genericInterfaces) &#123;</span><br><span class="line">            interfaces.append(genericInterface.toString());</span><br><span class="line">            interfaces.append(&quot; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(interfaces.toString());</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;  -- No Implemented Interfaces --&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //获取类继承树上的所有父类</span><br><span class="line">    List&lt;Class&gt; l = new ArrayList&lt;&gt;();</span><br><span class="line">    printAncestor(clazz, l);</span><br><span class="line">    if (l.size() != 0) &#123;</span><br><span class="line">        StringBuilder inheritance = new StringBuilder(&quot;Inheritance Path : &quot;);</span><br><span class="line">        for (Class&lt;?&gt; cl : l) &#123;</span><br><span class="line">            inheritance.append(cl.getCanonicalName());</span><br><span class="line">            inheritance.append(&quot; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(inheritance.toString());</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;  -- No Super Classes --&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //获取类的注解(只能获取到 RUNTIME 类型的注解)</span><br><span class="line">    Annotation[] ann = clazz.getAnnotations();</span><br><span class="line">    if (ann.length != 0) &#123;</span><br><span class="line">        StringBuilder annotation = new StringBuilder(&quot;Annotations : &quot;);</span><br><span class="line">        for (Annotation a : ann) &#123;</span><br><span class="line">            annotation.append(a.toString());</span><br><span class="line">            annotation.append(&quot; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(annotation.toString());</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;  -- No Annotations --&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static void printAncestor(Class&lt;?&gt; clazz, List&lt;Class&gt; superClassList) &#123;</span><br><span class="line">    Class&lt;?&gt; ancestor = clazz.getSuperclass();</span><br><span class="line">    if (ancestor != null) &#123;</span><br><span class="line">        superClassList.add(ancestor);</span><br><span class="line">        printAncestor(ancestor, superClassList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Class : java.util.HashMap</span><br><span class="line">Class Modifiers : public</span><br><span class="line">Parameters : K V </span><br><span class="line">Implemented Interfaces : java.util.Map&lt;K, V&gt; interface java.lang.Cloneable interface java.io.Serializable </span><br><span class="line">Inheritance Path : java.util.AbstractMap java.lang.Object </span><br><span class="line">  -- No Annotations --%n%n</span><br></pre></td></tr></table></figure>

<p>我们可以看到，获取类的限定符以及类型基本有下面几种方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//获取类名</span><br><span class="line">clazz.getCanonicalName()</span><br><span class="line">//获取类限定符</span><br><span class="line">clazz.getModifiers()</span><br><span class="line">//获取类泛型信息</span><br><span class="line">clazz.getTypeParameters()</span><br><span class="line">//获取类实现的所有接口</span><br><span class="line">clazz.getGenericInterfaces()</span><br><span class="line">//获取类的注解(只能获取到 RUNTIME 类型的注解)</span><br><span class="line">clazz.getAnnotations()  </span><br></pre></td></tr></table></figure>

<h3 id="Member相关"><a href="#Member相关" class="headerlink" title="Member相关"></a>Member相关</h3><p>++Reflection defines an interface java.lang.reflect.Member which is implemented by java.lang.reflect.Field, java.lang.reflect.Method, and java.lang.reflect.Constructor .++</p>
<p>对于Member接口可能会有人不清楚是干什么的，但如果提到实现它的三个实现类，估计用过反射的人都能知道。我们知道类成员主要包括构造函数，变量和方法，Java中的操作基本都和这三者相关，而Member的这三个实现类就分别对应他们。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.reflect.Field  //对应类变量</span><br><span class="line"></span><br><span class="line">java.lang.reflect.Method //对应类方法</span><br><span class="line"></span><br><span class="line">java.lang.reflect.Constructor //对应类构造函数</span><br></pre></td></tr></table></figure>


<p>反射就是通过这三个类才能在运行时改变对象状态。下面就让我们通过一些例子来说明如何通过反射操作它们。</p>
<p>下面，我们就依次来学习一下三个类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">private static void testFiled() &#123;</span><br><span class="line">    // 通过.class的语法获取People的Class类型的实例</span><br><span class="line">    Class clazz = People.class;</span><br><span class="line">    // 获取指定的变量（只要是声明的变量都能获得，包括private）</span><br><span class="line">    Field[] fields = clazz.getDeclaredFields();</span><br><span class="line"></span><br><span class="line">    for (Field field : fields) &#123;</span><br><span class="line">        StringBuilder builder = new StringBuilder();</span><br><span class="line">        //获取名称</span><br><span class="line">        builder.append(&quot;类变量名称 = &quot;);</span><br><span class="line">        builder.append(field.getName());</span><br><span class="line">        //获取类型</span><br><span class="line">        builder.append(&quot;,变量类型 = &quot;);</span><br><span class="line">        builder.append(field.getType());</span><br><span class="line">        //获取修饰符</span><br><span class="line">        builder.append(&quot;,变量修饰符 = &quot;);</span><br><span class="line">        builder.append(Modifier.toString(field.getModifiers()));</span><br><span class="line"></span><br><span class="line">        //获取注解</span><br><span class="line">        Annotation[] ann = field.getAnnotations();</span><br><span class="line">        if (ann.length != 0) &#123;</span><br><span class="line">            builder.append(&quot;,变量的注解 = &quot;);</span><br><span class="line">            for (Annotation a : ann) &#123;</span><br><span class="line">                builder.append(a.toString());</span><br><span class="line">                builder.append(&quot; &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            builder.append(&quot;  -- No Annotations --&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;field:&quot; + builder.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">field:类变量名称 = id,变量类型 = int,变量修饰符 = private  -- No Annotations --</span><br><span class="line">field:类变量名称 = name,变量类型 = class java.lang.String,变量修饰符 = public  -- No Annotations --</span><br><span class="line">field:类变量名称 = oldName,变量类型 = class java.lang.String,变量修饰符 = private,变量的注解 = @java.lang.Deprecated(forRemoval=false, since=&quot;&quot;) </span><br><span class="line">field:类变量名称 = age,变量类型 = int,变量修饰符 = private  -- No Annotations --</span><br></pre></td></tr></table></figure>
<h4 id="获取Field的相关信息"><a href="#获取Field的相关信息" class="headerlink" title="获取Field的相关信息"></a>获取Field的相关信息</h4><p>通过Field你可以访问给定对象的类变量，包括获取变量的类型、修饰符、注解、变量名、变量的值或者重新设置变量值，即使变量是private的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// Class提供了4种方法获得给定类的Field。</span><br><span class="line"></span><br><span class="line">getDeclaredField(String name)  // 获取指定的变量（只要是声明的变量都能获得，包括private）</span><br><span class="line">getField(String name)  //获取指定的变量（只能获得public的）</span><br><span class="line">getDeclaredFields()  // 获取所有声明的变量（包括private）</span><br><span class="line">getFields()  // 获取所有的public变量</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 获取变量类型、修饰符、注解</span><br><span class="line"></span><br><span class="line">field.getName()   // 获取变量名称</span><br><span class="line">field.getType()     // 获取变量类型</span><br><span class="line">Modifier.toString(field.getModifiers()) // 获取变量修饰符</span><br><span class="line">field.getAnnotations()  // 获取变量注解</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：上面的获取变量，是获取类变量，所以类中的所有变量（包括静态变量） 都能获取到</p>
<h4 id="设置Field的相关变量"><a href="#设置Field的相关变量" class="headerlink" title="设置Field的相关变量"></a>设置Field的相关变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">private static void testSetFiled() &#123;</span><br><span class="line">       People people = new People(10001, &quot;王大明&quot;, &quot;王小明&quot;, 18);</span><br><span class="line"></span><br><span class="line">       System.out.println(people.toString());</span><br><span class="line"></span><br><span class="line">       Class peopleClazz = people.getClass();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       try &#123;</span><br><span class="line">           Field publicFiledName = peopleClazz.getField(&quot;name&quot;);</span><br><span class="line">           //注意获取private变量时，需要用getDeclaredField</span><br><span class="line">           Field privateFiledAge = peopleClazz.getDeclaredField(&quot;age&quot;);</span><br><span class="line"></span><br><span class="line">           //反射获取名字, 年龄</span><br><span class="line">           String name = (String) publicFiledName.get(people);</span><br><span class="line"></span><br><span class="line">           // 这个地方要</span><br><span class="line">           // 变量是private，Java运行时会进行访问权限检查，private类型的变量无法进行直接访问，</span><br><span class="line">           // 刚刚进行的反射操作并没有打破这种封装，所以我们依然没有权限对private属性进行直接访问。</span><br><span class="line">           // 如果不加的话，会报下面的异常：</span><br><span class="line">           //java.lang.IllegalAccessException: class com.frewen.reflect.ReflectTest</span><br><span class="line">           // cannot access a member of class com.frewen.reflect.People with modifiers &quot;private&quot;</span><br><span class="line">           //at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:361)</span><br><span class="line">           //at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:591)</span><br><span class="line">           // at java.base/java.lang.reflect.Field.checkAccess(Field.java:1075)</span><br><span class="line">           // at java.base/java.lang.reflect.Field.getInt(Field.java:592)</span><br><span class="line">           // at com.frewen.reflect.ReflectTest.testSetFiled(ReflectTest.java:44)</span><br><span class="line">           // at com.frewen.reflect.ReflectTest.main(ReflectTest.java:21)</span><br><span class="line">           privateFiledAge.setAccessible(true);</span><br><span class="line">           int age = privateFiledAge.getInt(people);</span><br><span class="line">           System.out.println(&quot;反射获取：People name:&quot; + name + &quot;,age:&quot; + age);</span><br><span class="line"></span><br><span class="line">           // 通过反射设置新的变量值</span><br><span class="line">           publicFiledName.set(people, &quot;王大明反射名字&quot;);</span><br><span class="line">           privateFiledAge.set(people, 23);</span><br><span class="line"></span><br><span class="line">           /// 重新获取名字</span><br><span class="line">           name = people.getName();</span><br><span class="line">           age = privateFiledAge.getInt(people);</span><br><span class="line">           System.out.println(&quot;反射设置名字之后：People name:&quot; + name + &quot;,age:&quot; + age);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       &#125; catch (NoSuchFieldException | IllegalAccessException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">People constructor called with id = 10001,name = 王大明,oldName = 王小明,name = 18</span><br><span class="line">People id:10001,name:王大明,oldName:王小明,age:18</span><br><span class="line">反射获取：People name:王大明,age:18</span><br><span class="line">反射设置名字之后：People name:王大明反射名字,age:23</span><br></pre></td></tr></table></figure>
<p>这个相关的操作都比较简单，我们重点说一下setAccessible(boolean flag)这个方法</p>
<p>People的age变量是private，Java运行时会进行访问权限检查，private类型的变量无法进行直接访问，刚刚进行的反射操作并没有打破这种封装，所以我们依然没有权限对private属性进行直接访问。<br>难道就没有办法打破这种限制吗？</p>
<p>反射包里为我们提供了一个强大的类。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.reflect.AccessibleObject</span><br></pre></td></tr></table></figure>
<p>AccessibleObject为我们提供了一个方法 setAccessible(boolean flag)，该方法的作用就是可以取消 Java 语言访问权限检查。所以任何继承AccessibleObject的类的对象都可以使用该方法取消 Java 语言访问权限检查。（final类型变量也可以通过这种办法访问）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public final class Field extends AccessibleObject implements Member</span><br></pre></td></tr></table></figure>
<p>Field正是AccessibleObject的子类，那么简单了，只要在访问私有变量前调用filed.setAccessible(true)就可以了</p>
<p>注意Method和Constructor也都是继承AccessibleObject，所以如果遇到私有方法和私有构造函数无法访问，记得处理方法一样。</p>
<h4 id="获取Method的相关信息"><a href="#获取Method的相关信息" class="headerlink" title="获取Method的相关信息"></a>获取Method的相关信息</h4><p>++The java.lang.reflect.Method class provides APIs to access information about a method’s modifiers, return type, parameters, annotations, and thrown exceptions. It also be used to invoke methods.++</p>
<p>Class依然提供了4种方法获取Method:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">getDeclaredMethod(String name, Class... parameterTypes)  //根据方法名获得指定的方法， 参数name为方法名，参数parameterTypes为方法的参数类型，如 getDeclaredMethod(“eat”, String.class)</span><br><span class="line"></span><br><span class="line">getMethod(String name, Class... parameterTypes)  // 根据方法名获取指定的public方法，其它同上</span><br><span class="line"></span><br><span class="line">getDeclaredMethods()   //获取所有声明的方法</span><br><span class="line"></span><br><span class="line">getMethods()  //获取所有的public方法</span><br><span class="line"></span><br><span class="line">// 注意：获取带参数方法时，如果参数类型错误会报NoSuchMethodException，对于参数是泛型的情况，泛型须当成Object处理（Object.class）</span><br></pre></td></tr></table></figure>

<p>下面是获取方法的返回值类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getReturnType()  // 获取目标方法返回类型对应的Class对象</span><br><span class="line">getGenericReturnType()  //获取目标方法返回类型对应的Type对象</span><br></pre></td></tr></table></figure>

<p>这两个方法有啥区别呢？</p>
<p>getReturnType()返回类型为Class，getGenericReturnType()返回类型为Type; Class实现Type。</p>
<p>返回值为普通简单类型如Object, int, String等，getGenericReturnType()返回值和getReturnType()一样</p>
<p>下面我们举几个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">例如 public String method()</span><br><span class="line"></span><br><span class="line">那么各自返回值为：</span><br><span class="line"></span><br><span class="line">getReturnType() : class java.lang.String</span><br><span class="line">getGenericReturnType() : class java.lang.String</span><br><span class="line"></span><br><span class="line">例如 public T function2()</span><br><span class="line"></span><br><span class="line">那么各自返回值为：</span><br><span class="line"></span><br><span class="line">getReturnType() : class java.lang.Object</span><br><span class="line">getGenericReturnType() : T</span><br><span class="line"></span><br><span class="line">例如public Class function3()</span><br><span class="line"></span><br><span class="line">那么各自返回值为：</span><br><span class="line"></span><br><span class="line">getReturnType() : class java.lang.Class</span><br><span class="line">getGenericReturnType() : java.lang.Class</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>看个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">private static void testMethod() &#123;</span><br><span class="line">    Class&lt;?&gt; peopleClass = People.class;</span><br><span class="line">    try &#123;</span><br><span class="line">        //构造Cat实例</span><br><span class="line">        Constructor constructor = peopleClass.getConstructor(int.class, String.class, String.class, int.class);</span><br><span class="line">        Object people = constructor.newInstance(10001, &quot;王大明&quot;, &quot;王小明&quot;, 18);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //调用无参方法</span><br><span class="line">        Method toString = peopleClass.getDeclaredMethod(&quot;toString&quot;);</span><br><span class="line">        toString.invoke(people);</span><br><span class="line">        //调用定项参数方法</span><br><span class="line">        Method setAge = peopleClass.getDeclaredMethod(&quot;setAge&quot;, int.class);</span><br><span class="line">        setAge.invoke(people, 23);</span><br><span class="line">        //  这个地方注意一下： 注意：如果方法是private的，可以使用method.setAccessible(true)方法绕过权限检查</span><br><span class="line">        // 否则，会报异常：</span><br><span class="line">        // java.lang.IllegalAccessException: class com.frewen.reflect.ReflectTest</span><br><span class="line">        // cannot access a member of class com.frewen.reflect.People with modifiers &quot;private&quot;</span><br><span class="line">        //	at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:361)</span><br><span class="line">        //	at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:591)</span><br><span class="line">        //	at java.base/java.lang.reflect.Method.invoke(Method.java:558)</span><br><span class="line">        //	at com.frewen.reflect.ReflectTest.testMethod(ReflectTest.java:44)</span><br><span class="line">        //	at com.frewen.reflect.ReflectTest.main(ReflectTest.java:23)</span><br><span class="line">        Method getAge = peopleClass.getDeclaredMethod(&quot;getAge&quot;);</span><br><span class="line">        getAge.setAccessible(true);</span><br><span class="line">        System.out.println(getAge.invoke(people));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //调用不定项参数方法</span><br><span class="line">        //不定项参数可以当成数组来处理</span><br><span class="line">        Class[] argTypes = new Class[]&#123;String[].class&#125;;</span><br><span class="line">        Method varargsEat = peopleClass.getDeclaredMethod(&quot;eat&quot;, argTypes);</span><br><span class="line">        String[] foods = new String[]&#123;</span><br><span class="line">                &quot;milk&quot;, &quot;meat&quot;</span><br><span class="line">        &#125;;</span><br><span class="line">        varargsEat.invoke(people, (Object) foods);</span><br><span class="line">    &#125; catch (InstantiationException | IllegalAccessException | NoSuchMethodException | InvocationTargetException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：如果方法是private的，可以使用method.setAccessible(true)方法绕过权限检查</p>
<p>被调用的方法本身所抛出的异常在反射中都会以InvocationTargetException抛出。换句话说，反射调用过程中如果异常InvocationTargetException抛出，说明反射调用本身是成功的，因为这个异常是目标方法本身所抛出的异</p>
<h3 id="获取Constructor实例相关"><a href="#获取Constructor实例相关" class="headerlink" title="获取Constructor实例相关"></a>获取Constructor实例相关</h3><p>和Method一样，Class也为Constructor提供了4种方法获取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getDeclaredConstructor(Class... parameterTypes)   // 获取指定构造函数，参数parameterTypes为构造方法的参数类型</span><br><span class="line">getConstructor(Class... parameterTypes) // 获取指定public构造函数，参数parameterTypes为构造方法的参数类型</span><br><span class="line">getDeclaredConstructors() // 获取所有声明的构造方法，包括public和private的构造函数</span><br><span class="line">getConstructors()  //获取所有的public构造方法</span><br></pre></td></tr></table></figure>


<h4 id="通过Constructor创建实例对象"><a href="#通过Constructor创建实例对象" class="headerlink" title="通过Constructor创建实例对象"></a>通过Constructor创建实例对象</h4><p>通过反射有两种方法可以创建对象：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.reflect.Constructor.newInstance()</span><br><span class="line">Class.newInstance()</span><br></pre></td></tr></table></figure>

<p>一般来讲，我们优先使用第一种方法；那么这两种方法有何异同呢？</p>
<p>Class.newInstance()仅可用来调用无参的构造方法；Constructor.newInstance()可以调用任意参数的构造方法。</p>
<p>Class.newInstance()会将构造方法中抛出的异常不作处理原样抛出;Constructor.newInstance()会将构造方法中抛出的异常都包装成InvocationTargetException抛出。</p>
<h3 id="反射的缺点"><a href="#反射的缺点" class="headerlink" title="反射的缺点"></a>反射的缺点</h3><p>Java反射拥有强大功能的同时也带来了一些副作用。</p>
<ul>
<li><strong>1、性能开销</strong></li>
</ul>
<p>反射涉及类型动态解析，所以JVM无法对这些代码进行优化。因此，反射操作的效率要比那些非反射操作低得多。我们应该避免在经常被执行的代码或对性能要求很高的程序中使用反射。</p>
<ul>
<li><strong>2、安全限制</strong></li>
</ul>
<p>使用反射技术要求程序必须在一个没有安全限制的环境中运行。如果一个程序必须在有安全限制的环境中运行，如Applet，那么这就是个问题了。</p>
<ul>
<li><strong>3、内部曝光</strong></li>
</ul>
<p>由于反射允许代码执行一些在正常情况下不被允许的操作（比如访问私有的属性和方法），所以使用反射可能会导致意料之外的副作用－－代码有功能上的错误，降低可移植性。反射代码破坏了抽象性，因此当平台发生改变的时候，代码的行为就有可能也随着变化。</p>
<p>使用反射的一个原则：如果使用常规方法能够实现，那么就不要用反射。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.frewen.wang">Frewen.Wang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.frewen.wang/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">http://www.frewen.wang/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.frewen.wang" target="_blank">麦溪·在路上</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><a class="post-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a></div><div class="post_share"><div class="social-share" data-image="/img/frewen_tech.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat_square.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat_square.jpg" alt="微信打赏"/></a><div class="post-qr-code-desc">微信打赏</div></li><li class="reward-item"><a href="/img/alipay_square.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay_square.jpg" alt="支付宝打赏"/></a><div class="post-qr-code-desc">支付宝打赏</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/02.Java%E5%8F%8D%E5%B0%84%E7%9A%84%E5%8E%9F%E7%90%86%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="Java随机数之ThreadLocalRandom学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java随机数之ThreadLocalRandom学习</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/03.Java%E4%B8%AD%E7%9A%84Type%E7%B1%BB/" title="Java随机数之ThreadLocalRandom学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java随机数之ThreadLocalRandom学习</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/04.Java%E4%B9%8B%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0/03.Java%E4%B8%ADArray.sort%E7%9A%84%E6%96%B9%E6%B3%95%E5%AD%A6%E4%B9%A0/" title="Java中Array.sort的方法学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">Java中Array.sort的方法学习</div></div></a></div><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/03.Java%E4%B9%8B%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0/01.Java%E7%9A%84%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%BF%B0/" title="01.Java的集合类学习概述"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">01.Java的集合类学习概述</div></div></a></div><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/03.Java%E4%B9%8B%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0/02.Java%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0%E4%B9%8BLinkedList/" title="02.Java集合类学习之LinkedList"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">02.Java集合类学习之LinkedList</div></div></a></div><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/03.Java%E4%B9%8B%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0/02.Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%B9%8BArrayList%E5%AD%A6%E4%B9%A0/" title="Java集合类之ArrayList学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">Java集合类之ArrayList学习</div></div></a></div><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/03.Java%E4%B9%8B%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0/03.Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%B9%8BHashMap%E5%AD%A6%E4%B9%A0/" title="Java集合类之HashMap学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">Java集合类之HashMap学习</div></div></a></div><div><a href="/2022/01/05/01.AuraTechNotes/03.Java/03.Java%E4%B9%8B%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0/04.Java%E9%9B%86%E5%90%88%E7%B1%BB%E5%AD%A6%E4%B9%A0%E4%B9%8BVector/" title="Java集合类学习之Vector"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">Java集合类学习之Vector</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Valine</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/frewen_tech.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Frewen.Wang</div><div class="author-info__description">在青麦地上跑着,雪和太阳的光芒</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">858</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">146</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/FrewenWang"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/FrewenWang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:frewen1225@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://plus.google.com/FrewenWong" target="_blank" title="Google"><i class="fa-brands fa-google"></i></a><a class="social-icon" href="https://twitter.com/FrewenWong" target="_blank" title="Twitter"><i class="fa-brands fa-twitter"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">动态语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text">反射的功能</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">反射的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Class%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">Class类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Class%E5%AE%9E%E4%BE%8B%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">Class实例的获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AF%B9%E8%B1%A1%E7%9A%84getClass%E6%96%B9%E6%B3%95%EF%BC%88object-getClass-%EF%BC%89"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">1、实例化对象的getClass方法（object.getClass()）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81-class%E8%AF%AD%E6%B3%95%EF%BC%88People-class%EF%BC%89"><span class="toc-number">2.1.0.3.</span> <span class="toc-text">2、.class语法（People.class）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%80%9A%E8%BF%87Class-forName-%E5%85%A8%E9%99%90%E5%AE%9A%E5%90%8D"><span class="toc-number">2.1.0.4.</span> <span class="toc-text">3、通过Class.forName()全限定名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8BTYPE%E5%B1%9E%E6%80%A7"><span class="toc-number">2.1.0.5.</span> <span class="toc-text">4、基本数据类型TYPE属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87Class%E8%8E%B7%E5%8F%96%E7%B1%BB%E4%BF%AE%E9%A5%B0%E7%AC%A6%E5%92%8C%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.0.6.</span> <span class="toc-text">通过Class获取类修饰符和类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Member%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.1.</span> <span class="toc-text">Member相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96Field%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">获取Field的相关信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEField%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8F%98%E9%87%8F"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">设置Field的相关变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96Method%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">获取Method的相关信息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96Constructor%E5%AE%9E%E4%BE%8B%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.2.</span> <span class="toc-text">获取Constructor实例相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87Constructor%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">通过Constructor创建实例对象</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">反射的缺点</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/28/01.AuraTechNotes/09.Python/12.python%E7%9A%84pycharm%E7%9A%84%E4%BD%BF%E7%94%A8/01.pycharm%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="无题">无题</a><time datetime="2023-07-28T11:06:28.000Z" title="发表于 2023-07-28 19:06:28">2023-07-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/27/01.AuraTechNotes/09.Python/11.python%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/01.python%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="无题">无题</a><time datetime="2023-07-27T02:02:00.000Z" title="发表于 2023-07-27 10:02:00">2023-07-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/01.%E5%9F%BA%E4%BA%8EWindows11%E5%AE%89%E8%A3%85Ubuntu%E5%8F%8C%E7%B3%BB%E7%BB%9F/" title="基于Windows11安装Ubuntu双系统">基于Windows11安装Ubuntu双系统</a><time datetime="2023-07-19T16:00:00.000Z" title="发表于 2023-07-20 00:00:00">2023-07-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/17/01.AuraTechNotes/09.Python/01.python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/12.%E6%90%AD%E5%BB%BAbaidu%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" title="无题">无题</a><time datetime="2023-07-17T12:35:38.000Z" title="发表于 2023-07-17 20:35:38">2023-07-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/13/01.AuraTechNotes/20.AILearning/06.%E6%B7%B1%E5%BA%A6%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E9%87%8F%E5%8C%96%E5%8A%A0%E9%80%9F/08.QNN%E6%8E%A8%E7%90%86%E9%87%8F%E5%8C%96%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="无题">无题</a><time datetime="2023-06-13T14:28:06.000Z" title="发表于 2023-06-13 22:28:06">2023-06-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Frewen.Wang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://www.frewen.wang/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/'
    this.page.identifier = '/2022/01/05/01.AuraTechNotes/03.Java/05.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%AD%A6%E4%B9%A0/01.Java%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/'
    this.page.title = 'Java之反射基础学习'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Valine' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      GLOBAL_CONFIG_SITE.isPost && getCount()
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>