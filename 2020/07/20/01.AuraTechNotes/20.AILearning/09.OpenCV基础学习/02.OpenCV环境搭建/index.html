<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux系统上常用软件集锦 | 麦溪·在路上</title><meta name="author" content="Frewen.Wang"><meta name="copyright" content="Frewen.Wang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Activity的生命周期完全解析"><link rel="shortcut icon" href="/img/frewen_tech.png"><link rel="canonical" href="http://www.frewen.wang/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux系统上常用软件集锦',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-01-05 00:00:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/frewen_tech.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">864</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">158</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章归类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/page_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="麦溪·在路上"><span class="site-name">麦溪·在路上</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章归类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux系统上常用软件集锦</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-07-19T16:00:00.000Z" title="发表于 2020-07-20 00:00:00">2020-07-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-04T16:00:00.000Z" title="更新于 2022-01-05 00:00:00">2022-01-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>45分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux系统上常用软件集锦"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[TOC]</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>文章参考：<a target="_blank" rel="noopener" href="https://www.361shipin.com/blog/1547810635809554432">https://www.361shipin.com/blog/1547810635809554432</a></p>
<h1 id="MacOS编译安装OpenCV"><a href="#MacOS编译安装OpenCV" class="headerlink" title="MacOS编译安装OpenCV"></a>MacOS编译安装OpenCV</h1><h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2><p>OpenCV 4.6.0源码地址</p>
<p><a target="_blank" rel="noopener" href="https://github.com/opencv/opencv/releases/tag/4.6.0">https://github.com/opencv/opencv/releases/tag/4.6.0</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/opencv/opencv_contrib/releases/tag/4.6.0">https://github.com/opencv/opencv_contrib/releases/tag/4.6.0</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b1f0002af4792866edbfde6a85346deb78a79c68b019f2d6f13cee7e08cef0aa  opencv-4.6.0-android-sdk.zip</span><br><span class="line">b363dbf9d775afe2e31967d3b2041a0f1efcde6647ce0121422c2dfb64f1ce5b  opencv-4.6.0-docs.zip</span><br><span class="line">e4dc3e29d490c64e39aeaf61661635790232ba646656e6603dfe12786f36ab93  opencv-4.6.0-ios-framework.zip</span><br><span class="line">3fb046e14dc5b50719a86ea0395b5b1e3299e2343111ebd2e31828aa31d6d477  opencv-4.6.0-vc14_vc15.exe</span><br></pre></td></tr></table></figure>

<p><img src="/images/image-20220710221833127.png" alt="image-20220710221833127"></p>
<h2 id="图形化编译"><a href="#图形化编译" class="headerlink" title="图形化编译"></a>图形化编译</h2><img src="images/image-20220710233622882.png" alt="image-20220710233622882" style="zoom:50%;" />



<p>然后点击Configure，等待之后会列出一些红色项，继续点击Configure直至没有红色项。</p>
<img src="images/image-20220710234242298.png" alt="image-20220710234242298" style="zoom:50%;" />

<p>现在点击Generate开始生成Binaries。</p>
<p><img src="/images/image-20220710234736667.png" alt="image-20220710234736667"></p>
<p>在终端Terminal中进入build目录，使用命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make</span><br></pre></td></tr></table></figure>

<p>运行完毕后再使用命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>至此就安装完毕了。</p>
<p>提示：<code>make</code>时可能需要等待一会儿，喝杯咖啡稍安勿躁。</p>
<h2 id="命令行编译"><a href="#命令行编译" class="headerlink" title="命令行编译"></a>命令行编译</h2><p>编译配置介绍：</p>
<p>opencv依赖第三方的库，所以当把opencv编译成静态库的时候，注意要把它运行时必要的依赖库也编译进来，opencv源码内有自己的3rdparty，主要有：libjpeg、libpng、libtiff、libzlib、libwebp、libprotobuf、ffmpeg（用到video时编译）、libgtk（用于显示界面显示，服务器部署不会用到），可以通过cmake -LA来查看配置的编译信息，再根据信息考虑把opencv的哪些module编译进来。</p>
<p>opencv中的子库介绍：</p>
<p> 1 FLANN</p>
<p>近似最近邻库，NN就是nearest neighbor的缩写。</p>
<p>2 IlmImf</p>
<p>Ilm是Industrial light &amp; magic公司的缩写。</p>
<p>Imf是image format的缩写吗？</p>
<p>3 libjasper</p>
<p>Jasper是JPEG2000的一个非官方实现，由一个国外的一个大学教师实现，还算是个好用的LIB，你可以从<a target="_blank" rel="noopener" href="http://www.ece.uvic.ca/~mdadams/jasper/%E5%9C%B0%E5%9D%80%E4%B8%8B%E5%9C%A8%EF%BC%8C%E9%87%8C%E9%9D%A2%E6%9C%89VC%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E3%80%82">http://www.ece.uvic.ca/~mdadams/jasper/地址下在，里面有VC的工程文件。</a><br>Jpeg60是JPEG的官方实现；其编译只提供makefile来编译。<br>在图形压缩算法上这里不讨论，这里主要讨论其性能方面的问题：<br>1&gt;JPEG2000拥有较高质量的图形，即使在100倍的压缩比例下，而JPEG是不行的，压缩比高一定程度就会出现马赛克。<br>2&gt;高质量的图形是以大量的运算为代价的，所以JPEG2000的时间是很长的，一般对1024<em>768</em>24的BMP图进行ENCODE或DECODE需要花费2秒种（P4-3。0）左右的时间，这个时间对于实时应用是很可怕的。Jasper在对JPEG的实现过程中为了保证对多种图形的处理，其算法写的不够精简，先要将待ENCODE的图形转换为其内部的格式，然后再使用JP2000的算法来ENCODE。而JPEG在时间方面有较好的表现，压缩上面的图形在100ms以内，对于大部分实时应用来说还是很好的。<br>虽然Jasper实现的不够好，我想他的质量还是能够吸引很多人，对于时间要求不长的应用，2秒不算是长时间，我想不久的将来会有更好的JPEG2000实现，哪个时候就可以使用了。</p>
<p>4 libjpeg</p>
<p>这是jpeg官方提供的一个jpeg图片压缩和解压缩的库。</p>
<p>5 libpng</p>
<p>就是png图片的处理库，可以干关于png图片的各种事情。</p>
<p>6 libtiff</p>
<p>tiff是tagged image file format的缩写，libtiff是读写tif文件的库。</p>
<p>7 opencv_calib3d</p>
<p>用于做camera校准和3维重建的库。</p>
<p>8 opencv_contrib</p>
<p>包含了一些还不是很稳定的功能。</p>
<p>9 opencv_core</p>
<p>提供了一些最基本的图像处理结构体。</p>
<p>10 opencv_feature</p>
<p>特征检测和描述。</p>
<p>11 opencv_gpu</p>
<p>使用gpu的运算能力的库。</p>
<p>12 opencv_highgui</p>
<p>用户界面库。</p>
<p>13 opencv_imgproc</p>
<p>图像处理库，比如计算直方图，图像变换等。。</p>
<p>14 opencv_ml</p>
<p>机器学习库。</p>
<p>15 opencv_nonfree</p>
<p>已经被申请了专利的库，比如sift和surf。</p>
<p>16 opencv_objdetect</p>
<p>opencv目标检测。</p>
<p>17 opencv_ocl</p>
<p>open computing language，通用计算语言，就是说，写一次代码就可以在多核处理器、GPU和DSP上运行。</p>
<p>18 opencv_photo</p>
<p>摄影相关的库，比如去除图像上的瑕疵、以及图像去燥。</p>
<p>19 opencv_stitch</p>
<p>图像拼接库。</p>
<p>20 opencv_superres</p>
<p>image super resolution，用于增加图片的分辨率，使得模糊的图片更加清晰。</p>
<p>21 opencv_ts</p>
<p>opencv的测试系统。</p>
<p>22 opencv_video</p>
<p>视频分析库。</p>
<p>23 opencv_videostab</p>
<p>视频图像去抖动库。</p>
<p>24 opencv_viz</p>
<p>三维虚拟空间库。</p>
<p>25 zlib</p>
<p>基于deflate算法的数据压缩和解压缩算法库。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">cmake -DEXECUTABLE_OUTPUT_PATH:PATH=$(pwd) \</span><br><span class="line">    -DCMAKE_BUILD_TYPE=RELEASE \</span><br><span class="line">    -DCMAKE_INSTALL_PREFIX=/usr/local \</span><br><span class="line">    -DBUILD_JASPER=ON \</span><br><span class="line">    -DBUILD_JAVA=OFF \</span><br><span class="line">    -DBUILD_JPEG=ON \           #编译opencv 3rdparty自带的libjpeg</span><br><span class="line">    -DBUILD_PERF_TESTS=OFF \</span><br><span class="line">    -DBUILD_PNG=ON \            #编译opencv 3rdparty自带的libpng</span><br><span class="line">    -DBUILD_PROTOBUF=ON \       #编译opencv 3rdparty自带的libprotobuf</span><br><span class="line">    -DBUILD_SHARED_LIBS=NO \    #编译成静态库</span><br><span class="line">    -DBUILD_TESTS=OFF \</span><br><span class="line">    -DBUILD_TIFF=ON \           #编译opencv 3rdparty自带的libtiff</span><br><span class="line">    -DBUILD_ZLIB=ON \           #编译opencv 3rdparty自带的libzlib</span><br><span class="line">    -DBUILD_WEBP=ON \           #编译opencv 3rdparty自带的libwebp</span><br><span class="line">    -DBUILD_opencv_apps=OFF \</span><br><span class="line">    -DBUILD_opencv_core=ON \</span><br><span class="line">    -DBUILD_opencv_calib3d=ON \</span><br><span class="line">    -DBUILD_opencv_dnn=ON \</span><br><span class="line">    -DBUILD_opencv_features2d=ON \</span><br><span class="line">    -DBUILD_opencv_flann=ON \</span><br><span class="line">    -DBUILD_opencv_gapi=OFF \</span><br><span class="line">    -DBUILD_opencv_highgui=ON \</span><br><span class="line">    -DBUILD_opencv_imgcodecs=ON \</span><br><span class="line">    -DBUILD_opencv_imgproc=ON \</span><br><span class="line">    -DBUILD_opencv_java_bindings_generator=OFF \</span><br><span class="line">    -DBUILD_opencv_js=OFF \</span><br><span class="line">    -DBUILD_opencv_ml=ON \</span><br><span class="line">    -DBUILD_opencv_objdetect=OFF \</span><br><span class="line">    -DBUILD_opencv_photo=OFF \</span><br><span class="line">    -DBUILD_opencv_python2=OFF \</span><br><span class="line">    -DBUILD_opencv_python3=OFF \</span><br><span class="line">    -DBUILD_opencv_python_bindings_generator=OFF \</span><br><span class="line">    -DBUILD_opencv_stitching=OFF \</span><br><span class="line">    -DBUILD_opencv_ts=OFF \</span><br><span class="line">    -DBUILD_opencv_video=OFF \</span><br><span class="line">    -DBUILD_opencv_videoio=OFF \</span><br><span class="line">    -DWITH_GTK=OFF \</span><br><span class="line">    -DWITH_GTK_2_X=OFF \</span><br><span class="line">    -DWITH_LAPACK=OFF \</span><br></pre></td></tr></table></figure>

<ul>
<li>BUILD_IPP_IW 编译Intel IPP集成包装，Intel(R) Integrated Performance Primitives Integration Wrappers</li>
<li>BUILD_ITT &#x2F; WITH_ITT 编译&#x2F;添加Intel? Instrumentation and Tracing Technology (Intel? ITT)支持，代码性能检测用，比如游戏开发中关键性能数据收集，因为ITT API 有开销，不需要的可以关闭</li>
<li>BUILD_JASPER 编译3rdparty&#x2F;libjasper项目用于 JPEG-2000 图像编解码支持，<a target="_blank" rel="noopener" href="http://www.ece.uvic.ca/~frodo/jasper/">http://www.ece.uvic.ca/~frodo/jasper/</a></li>
<li>BUILD_OPENEXR 编译3rdparty&#x2F;openexr项目用于 HDR 图像编解码支持，<a target="_blank" rel="noopener" href="http://www.openexr.com/">http://www.openexr.com/</a></li>
<li>BUILD_PACKAGE -&gt; Prior to version 2.3 with this you could build a project that will build an <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=OpenCV&spm=1001.2101.3001.7020">OpenCV</a> installer. With this you can easily install your OpenCV flavor on other systems. For the latest source files of OpenCV it generates a new project that simply creates zip archive with OpenCV sources.</li>
<li>BUILD_PERF_TESTS -&gt; There are also performance tests for many OpenCV functions. If you’re concerned about performance, build them and run.</li>
<li>BUILD_PROTOBUF <a target="_blank" rel="noopener" href="http://blog.csdn.net/caisini_vc/article/details/5599468">http://blog.csdn.net/caisini_vc/article/details/5599468</a></li>
</ul>
<h3 id="MacOS系统上源码编译"><a href="#MacOS系统上源码编译" class="headerlink" title="MacOS系统上源码编译"></a>MacOS系统上源码编译</h3><p><img src="/images/image-20211204210055512.png" alt="image-20211204210055512"></p>
<p>当然我们也可以下载OpenCV的3.X的版本</p>
<p>比如：我们下载3.4.6版本：</p>
<p><a target="_blank" rel="noopener" href="https://opencv.org/releases/">https://opencv.org/releases/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/opencv/opencv/tree/3.4.16">https://github.com/opencv/opencv/tree/3.4.16</a></p>
<h4 id="下载contrib的源码"><a href="#下载contrib的源码" class="headerlink" title="下载contrib的源码"></a>下载contrib的源码</h4><p>然后我们同样下载contribe的</p>
<p><a target="_blank" rel="noopener" href="https://github.com/opencv/opencv_contrib">https://github.com/opencv/opencv_contrib</a></p>
<p>OpenCV下载地址：<a target="_blank" rel="noopener" href="https://opencv.org/releases/">https://opencv.org/releases/</a></p>
<p>下载是对应源码下载地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/opencv/opencv/releases/tag/4.6.0</span><br><span class="line"></span><br><span class="line">https://github.com/opencv/opencv_contrib/releases/tag/4.6.0</span><br></pre></td></tr></table></figure>

<p>下载完成进行解压完成之后：</p>
<p>进入OpenCV的根目录里面，创建一个build目录</p>
<p>进入下面&#x2F;Users&#x2F;frewen&#x2F;03.ProgramStudy&#x2F;15.CLang&#x2F;04.Resources&#x2F;01.OpenCV&#x2F;opencv-4.5.3&#x2F;build目录中。执行下面的脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">frewen@FreweniMacbook:~/03.ProgramSpace/20.AI/04.Resource/opencv-3.4.16$ pwd</span><br><span class="line">/user/frewen/03.ProgramSpace/20.AI/04.Resource/opencv-3.4.16</span><br><span class="line">frewen@FreweniMacbook:~/03.ProgramSpace/20.AI/04.Resource/opencv-3.4.16$ mkdir build </span><br><span class="line">frewen@FreweniMacbook:~/03.ProgramSpace/20.AI/04.Resource/opencv-3.4.16$ cd build </span><br></pre></td></tr></table></figure>

<p>下载完成进行解压完成之后：</p>
<p>进入下面&#x2F;Users&#x2F;frewen&#x2F;03.ProgramStudy&#x2F;20.AI&#x2F;04.Resource&#x2F;OpenCV&#x2F;opencv-4.5.3&#x2F;build目录中。执行下面的脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/Users/wangzhijiang/03.ProgramSpace/20.AILearning/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D OPENCV_EXTRA_MODULES_PATH=/Users/wangzhijiang/03.ProgramSpace/20.AILearning/03.Source/opencv-library/opencv4.6.0/opencv_contrib-4.6.0/modules   \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用4个线程安装</span></span><br><span class="line"></span><br><span class="line">make -j4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用8个线程安装</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make -j8</span></span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>我们需要将opencv.pc中的pkgconfig文件复制到&#x2F;usr&#x2F;local&#x2F;lib&#x2F;pkgconfig，并将其命名为opencv4.pc。这样，如果你已经安装了OpenCV 3.x.x，则不会发生冲突。让我们继续：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export DYLB_LIBRARY_OPENCV_PATH=/Users/frewen/Library/AFrewenLib/opencv4.5.3/lib:$DYLB_LIBRARY_OPENCV_PATH</span><br></pre></td></tr></table></figure>

<p>我们需要将opencv.pc中的pkgconfig文件复制到&#x2F;usr&#x2F;local&#x2F;lib&#x2F;pkgconfig，并将其命名为opencv4.pc。这样，如果你已经安装了OpenCV 3.x.x，则不会发生冲突。让我们继续：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /Users/frewen/Library/AFrewenLib/opencv4.5.3/lib/pkgconfig/opencv4.pc  /usr/local/lib/pkgconfig/opencv4.pc  </span><br></pre></td></tr></table></figure>

<p>我们还需要更新PKG_CONFIG_PATH变量。请打开~&#x2F;.profile文件并添加以下命令行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig/:$PKG_CONFIG_PATH</span><br></pre></td></tr></table></figure>

<p>使用以下命令重新加载~&#x2F;.profile文件：</p>
<p>综上环境变量设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export DYLB_LIBRARY_OPENCV_PATH=/Users/frewen/Library/AFrewenLib/opencv4.5.3/lib:$DYLB_LIBRARY_OPENCV_PATH</span><br><span class="line">export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig/:$PKG_CONFIG_PATH</span><br></pre></td></tr></table></figure>



<h1 id="Ubuntu上搭建OpenCV环境（Ubuntu20-04）"><a href="#Ubuntu上搭建OpenCV环境（Ubuntu20-04）" class="headerlink" title="Ubuntu上搭建OpenCV环境（Ubuntu20.04）"></a>Ubuntu上搭建OpenCV环境（Ubuntu20.04）</h1><p>OpenCV下载地址：<a target="_blank" rel="noopener" href="https://opencv.org/releases/">https://opencv.org/releases/</a></p>
<p>下载是对应源码下载地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OpenCV4.6.0版本</span></span><br><span class="line"></span><br><span class="line">https://codeload.github.com/opencv/opencv/zip/refs/tags/4.6.0</span><br><span class="line"></span><br><span class="line">https://github.com/opencv/opencv_contrib/releases/tag/4.6.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">OpenCV 3.4.16版本</span></span><br><span class="line">https://github.com/opencv/opencv/archive/3.4.16.zip</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们安装的环境是基于Ubuntu20.04的OpenCV3.4.6版本</p>
<p>安装OpenCV所需要的依赖库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake  libgtk2.0-dev libavcodec-dev libavformat-dev libjpeg.dev libpng-dev libtiff-dev libtiff4.dev libswscale-dev libjasper-dev libcurl4-openssl-dev libtbb2 libdc1394-22-dev libhdf5-serial-dev libcanberra-gtk-module libgtk2.0-dev pkg-config</span><br></pre></td></tr></table></figure>

<p>下载完进行解压</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip 3.4.16.zip</span><br></pre></td></tr></table></figure>

<p>进入OpenCV的根目录里面，创建一个build目录</p>
<p>进入下面&#x2F;home&#x2F;frewen&#x2F;03.ProgramSpace&#x2F;20.AILearning&#x2F;04.Resource&#x2F;opencv-3.4.16&#x2F;build目录中。执行下面的脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">frewen@FreweniUbuntu:/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv-3.4.16$ pwd</span><br><span class="line">/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv-3.4.16</span><br><span class="line">frewen@FreweniUbuntu:/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv-3.4.16$ mkdir build  &amp; cd build</span><br><span class="line">frewen@FreweniUbuntu:/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv-3.4.16$ cd build </span><br><span class="line"></span><br><span class="line">cmake .. -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv-3.4.16/opencv-3.4.16/build -D OPENCV_GENERATE_PKGCONFIG=ON -D INSTALL_C_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D OPENCV_EXTRA_MODULES_PATH=/home/frewen/03.ProgramSpace/20.AILearning/04.Resource/opencv_contrib-3.4.16/modules</span><br><span class="line">..</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">去除编译Example</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用4个内核安装</span></span><br><span class="line">make -j4</span><br><span class="line">make -j8</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h1 id="Anaconda安装OpenCV"><a href="#Anaconda安装OpenCV" class="headerlink" title="Anaconda安装OpenCV"></a>Anaconda安装OpenCV</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c menpo opencv3=3.2.0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Fetching package metadata ...............</span><br><span class="line">PackageNotFoundError: Package missing in current win-64 channels:</span><br><span class="line">  - opencv3 3.2.0*</span><br></pre></td></tr></table></figure>

<p>查了一下原來是 menpo 這個channel 的opencv3。</p>
<h3 id="解決方法"><a href="#解決方法" class="headerlink" title="解決方法:"></a>解決方法:</h3><p>用 <code>conda-forge</code> 這個channel 就可以了:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge opencv=3.2.0</span><br><span class="line">Fetching package metadata ...............</span><br><span class="line">Solving package specifications: .</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="MacOS安装OpenCV"><a href="#MacOS安装OpenCV" class="headerlink" title="MacOS安装OpenCV"></a>MacOS安装OpenCV</h1><h2 id="Homebrew安装"><a href="#Homebrew安装" class="headerlink" title="Homebrew安装"></a>Homebrew安装</h2><p>首先，使用 homebrew 安装 OpenCV (目前最新的版本是 4.4)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install opencv</span><br></pre></td></tr></table></figure>

<p>TODO 本人安装报错！！</p>
<h1 id="归纳总结"><a href="#归纳总结" class="headerlink" title="归纳总结"></a>归纳总结</h1><p>在 Clion 中配置 OpenCV 的开发环境并不繁琐，只需要了解 CMake 即可。配置完之后，就可以开心的使用 OpenCV 处理图像了。</p>
<h1 id="OpenCV源码编译"><a href="#OpenCV源码编译" class="headerlink" title="OpenCV源码编译"></a>OpenCV源码编译</h1><h2 id="Linux版本编译"><a href="#Linux版本编译" class="headerlink" title="Linux版本编译"></a>Linux版本编译</h2><p>源码下载地址：<a target="_blank" rel="noopener" href="https://codeload.github.com/opencv/opencv/zip/refs/tags/4.7.0">https://codeload.github.com/opencv/opencv/zip/refs/tags/4.7.0</a></p>
<p>源码下载地址：<a target="_blank" rel="noopener" href="https://github.com/opencv/opencv_contrib/releases/tag/4.7.0">https://github.com/opencv/opencv_contrib/releases/tag/4.7.0</a></p>
<p>解压文件</p>
<p>进入下面&#x2F;home&#x2F;frewen&#x2F;03.ProgramSpace&#x2F;20.AIStudy&#x2F;03.Source&#x2F;opencv-library&#x2F;opencv4.6.0&#x2F;opencv-4.6.0目录中。</p>
<p>创建build目录，进入目录build目录</p>
<p>执行下面的脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv-2.4.13.4/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=OFF    \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 编译OpenCV4.6.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 打开BUILD_TIFF编译开关</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D OPENCV_EXTRA_MODULES_PATH=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv_contrib-4.6.0/modules   \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 去掉opencv_contrib的编译选项</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> opencv开启编译3rd_party的依赖库</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D BUILD_JPEG=ON \</span><br><span class="line">	-D BUILD_PERF_TESTS=OFF \</span><br><span class="line">	-D BUILD_PNG=ON \</span><br><span class="line">	-D WITH_JPEG=ON \</span><br><span class="line">	-D WITH_JASPER=ON \</span><br><span class="line">  -D BUILD_PROTOBUF=OFF \</span><br><span class="line">  -D BUILD_SHARED_LIBS=ON \</span><br><span class="line">  -D BUILD_OPENEXR=ON \</span><br><span class="line">  -D BUILD_JASPER=ON \</span><br><span class="line">  -D BUILD_TESTS=OFF \</span><br><span class="line">  -D BUILD_TIFF=ON \</span><br><span class="line">  -D BUILD_ZLIB=ON \</span><br><span class="line">  -D BUILD_WEBP=ON \</span><br><span class="line">    ..</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译MacOS版本的opencv的依赖库</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入opencv4.7.0的源码的build目录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pwd</span></span></span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/build</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开BUILD_TIFF编译开关</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">去掉opencv_contrib的编译选项</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">opencv开启编译3rd_party的依赖库</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D BUILD_JPEG=ON \</span><br><span class="line">	-D BUILD_PERF_TESTS=OFF \</span><br><span class="line">	-D BUILD_PNG=ON \</span><br><span class="line">	-D WITH_JPEG=ON \</span><br><span class="line">	-D WITH_JASPER=ON \</span><br><span class="line">  -D BUILD_PROTOBUF=OFF \</span><br><span class="line">  -D BUILD_SHARED_LIBS=ON \</span><br><span class="line">  -D BUILD_OPENEXR=ON \</span><br><span class="line">  -D BUILD_JASPER=ON \</span><br><span class="line">  -D BUILD_TESTS=OFF \</span><br><span class="line">  -D BUILD_TIFF=ON \</span><br><span class="line">  -D BUILD_ZLIB=ON \</span><br><span class="line">  -D BUILD_WEBP=ON \</span><br><span class="line">    ..</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用4个线程安装</span></span><br><span class="line">make -j4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make -j8  <span class="comment"># 使用8个线程安装</span></span></span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>



<p>编译过程出现问题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Scanning dependencies of target opencv_annotation</span><br><span class="line">[ 25%] Building CXX object apps/annotation/CMakeFiles/opencv_annotation.dir/opencv_annotation.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/bioinspired/CMakeFiles/opencv_bioinspired.dir/src/imagelogpolprojection.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/calib3d/CMakeFiles/opencv_calib3d.dir/src/levmarq.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/dnn/CMakeFiles/opencv_dnn.dir/src/layers/softmax_layer.cpp.o</span><br><span class="line">[ 25%] Linking CXX executable ../../bin/opencv_annotation</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadRGBAStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadDirectory@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteEncodedStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFIsTiled@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteScanline@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFGetField@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFScanlineSize@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteDirectory@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadEncodedTile@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadRGBATile@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFClose@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFClientOpen@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFRGBAImageOK@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFOpen@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadEncodedStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetField@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetWarningHandler@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetErrorHandler@LIBTIFF_4.0&quot;</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br><span class="line">make[2]: *** [apps/annotation/CMakeFiles/opencv_annotation.dir/build.make:95: bin/opencv_annotation] Erro 1</span><br><span class="line">make[1]: *** [CMakeFiles/Makefile2:18408: apps/annotation/CMakeFiles/opencv_annotation.dir/all] Erro 2</span><br><span class="line">make[1]: ** Waiting for other processes to finish.</span><br></pre></td></tr></table></figure>

<p>解决方法：<a target="_blank" rel="noopener" href="https://icode.best/i/39706749867569">https://icode.best/i/39706749867569</a></p>
<p>加上如下编译配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-D BUILD_EXAMPLES=OFF   </span><br></pre></td></tr></table></figure>



<h3 id="Ubuntu安装opencv-python"><a href="#Ubuntu安装opencv-python" class="headerlink" title="Ubuntu安装opencv_python"></a>Ubuntu安装opencv_python</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv_python  -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">pip install opencv_python==3.4.10.37  -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<h2 id="MacOS版本编译"><a href="#MacOS版本编译" class="headerlink" title="MacOS版本编译"></a>MacOS版本编译</h2><h2 id="Linux版本编译-1"><a href="#Linux版本编译-1" class="headerlink" title="Linux版本编译"></a>Linux版本编译</h2><p>源码下载地址：<a target="_blank" rel="noopener" href="https://codeload.github.com/opencv/opencv/zip/refs/tags/4.7.0">https://codeload.github.com/opencv/opencv/zip/refs/tags/4.7.0</a></p>
<p>源码下载地址：<a target="_blank" rel="noopener" href="https://github.com/opencv/opencv_contrib/releases/tag/4.7.0">https://github.com/opencv/opencv_contrib/releases/tag/4.7.0</a></p>
<p>解压文件</p>
<p>进入下面&#x2F;home&#x2F;frewen&#x2F;03.ProgramSpace&#x2F;20.AIStudy&#x2F;03.Source&#x2F;opencv-library&#x2F;opencv4.6.0&#x2F;opencv-4.6.0目录中。</p>
<p>创建build目录，进入目录build目录</p>
<p>执行下面的脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv-2.4.13.4/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=OFF    \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 编译OpenCV4.6.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 打开BUILD_TIFF编译开关</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D OPENCV_EXTRA_MODULES_PATH=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv_contrib-4.6.0/modules   \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 去掉opencv_contrib的编译选项</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	.. </span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> opencv开启编译3rd_party的依赖库</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/home/frewen/03.ProgramSpace/20.AIStudy/03.Source/opencv-library/opencv4.6.0/opencv-4.6.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D BUILD_JPEG=ON \</span><br><span class="line">	-D BUILD_PERF_TESTS=OFF \</span><br><span class="line">	-D BUILD_PNG=ON \</span><br><span class="line">	-D WITH_JPEG=ON \</span><br><span class="line">	-D WITH_JASPER=ON \</span><br><span class="line">  -D BUILD_PROTOBUF=OFF \</span><br><span class="line">  -D BUILD_SHARED_LIBS=ON \</span><br><span class="line">  -D BUILD_OPENEXR=ON \</span><br><span class="line">  -D BUILD_JASPER=ON \</span><br><span class="line">  -D BUILD_TESTS=OFF \</span><br><span class="line">  -D BUILD_TIFF=ON \</span><br><span class="line">  -D BUILD_ZLIB=ON \</span><br><span class="line">  -D BUILD_WEBP=ON \</span><br><span class="line">    ..</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译MacOS版本的opencv的依赖库</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入opencv4.7.0的源码的build目录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pwd</span></span></span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/build</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开BUILD_TIFF编译开关</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">去掉opencv_contrib的编译选项</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">opencv开启编译3rd_party的依赖库</span></span><br><span class="line">cmake     \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=RELEASE    \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/install   \</span><br><span class="line">	-D OPENCV_GENERATE_PKGCONFIG=ON    \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_EXAMPLES=ON    \</span><br><span class="line">	-D BUILD_TIFF=ON  \</span><br><span class="line">	-D BUILD_JPEG=ON \</span><br><span class="line">	-D BUILD_PERF_TESTS=OFF \</span><br><span class="line">	-D BUILD_PNG=ON \</span><br><span class="line">	-D WITH_JPEG=ON \</span><br><span class="line">	-D WITH_JASPER=ON \</span><br><span class="line">  -D BUILD_PROTOBUF=OFF \</span><br><span class="line">  -D BUILD_SHARED_LIBS=ON \</span><br><span class="line">  -D BUILD_OPENEXR=ON \</span><br><span class="line">  -D BUILD_JASPER=ON \</span><br><span class="line">  -D BUILD_TESTS=OFF \</span><br><span class="line">  -D BUILD_TIFF=ON \</span><br><span class="line">  -D BUILD_ZLIB=ON \</span><br><span class="line">  -D BUILD_WEBP=ON \</span><br><span class="line">    ..</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用4个线程安装</span></span><br><span class="line">make -j4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make -j8  <span class="comment"># 使用8个线程安装</span></span></span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>通过日志，我们可以看到目前编译的模块有哪些？</p>
<p>有时候，我们编译某些模块会发现编译不出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--   OpenCV modules:</span><br><span class="line">--     To be built:                 calib3d core dnn features2d flann gapi highgui imgcodecs imgproc ml objdetect photo stitching ts video videoio</span><br><span class="line">--     Disabled:                    world</span><br><span class="line">--     Disabled by dependency:      -</span><br><span class="line">--     Unavailable:                 java python2 python3</span><br><span class="line">--     Applications:                tests perf_tests apps</span><br><span class="line">--     Documentation:               NO</span><br><span class="line">--     Non-free algorithms:         NO</span><br><span class="line">-- </span><br><span class="line">--   GUI:                           NONE</span><br><span class="line">--     GTK+:                        NO</span><br><span class="line">--     VTK support:                 NO</span><br></pre></td></tr></table></figure>



<p>编译过程出现问题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Scanning dependencies of target opencv_annotation</span><br><span class="line">[ 25%] Building CXX object apps/annotation/CMakeFiles/opencv_annotation.dir/opencv_annotation.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/bioinspired/CMakeFiles/opencv_bioinspired.dir/src/imagelogpolprojection.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/calib3d/CMakeFiles/opencv_calib3d.dir/src/levmarq.cpp.o</span><br><span class="line">[ 25%] Building CXX object modules/dnn/CMakeFiles/opencv_dnn.dir/src/layers/softmax_layer.cpp.o</span><br><span class="line">[ 25%] Linking CXX executable ../../bin/opencv_annotation</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadRGBAStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadDirectory@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteEncodedStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFIsTiled@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteScanline@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFGetField@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFScanlineSize@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFWriteDirectory@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadEncodedTile@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadRGBATile@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFClose@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFClientOpen@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFRGBAImageOK@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFOpen@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFReadEncodedStrip@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetField@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetWarningHandler@LIBTIFF_4.0&quot;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.5.0: undefined reference to &quot;TIFFSetErrorHandler@LIBTIFF_4.0&quot;</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br><span class="line">make[2]: *** [apps/annotation/CMakeFiles/opencv_annotation.dir/build.make:95: bin/opencv_annotation] Erro 1</span><br><span class="line">make[1]: *** [CMakeFiles/Makefile2:18408: apps/annotation/CMakeFiles/opencv_annotation.dir/all] Erro 2</span><br><span class="line">make[1]: ** Waiting for other processes to finish.</span><br></pre></td></tr></table></figure>

<p>解决方法：<a target="_blank" rel="noopener" href="https://icode.best/i/39706749867569">https://icode.best/i/39706749867569</a></p>
<p>加上如下编译配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-D BUILD_EXAMPLES=OFF   </span><br></pre></td></tr></table></figure>

<p>编译出错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br></pre></td><td class="code"><pre><span class="line">This file was generated by a newer version of protoc which is</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error This file was generated by a newer version of protoc <span class="built_in">which</span> is</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error incompatible with your Protocol Buffer headers. Please update</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:14:2: error: your headers.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error your headers.</span></span><br><span class="line"> ^</span><br><span class="line">[ 42%] Linking CXX executable ../../bin/example_snippet_imgproc_segmentation</span><br><span class="line">[ 42%] Built target example_snippet_imgproc_segmentation</span><br><span class="line">[ 42%] Building CXX object modules/imgcodecs/CMakeFiles/opencv_imgcodecs.dir/src/grfmt_base.cpp.o</span><br><span class="line">[ 42%] Building CXX object modules/dnn/CMakeFiles/opencv_dnn.dir/misc/onnx/opencv-onnx.pb.cc.o</span><br><span class="line">[ 42%] Building CXX object modules/photo/CMakeFiles/opencv_photo.dir/src/calibrate.cpp.o</span><br><span class="line">[ 42%] Building CXX object modules/features2d/CMakeFiles/opencv_features2d.dir/src/agast.cpp.o</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1037:67: error: no type named &#x27;ConstantInitialized&#x27; in namespace &#x27;google::protobuf::internal&#x27;</span><br><span class="line">  explicit constexpr BlobShape(::PROTOBUF_NAMESPACE_ID::internal::ConstantInitialized);</span><br><span class="line">                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1151:16: error: unknown type name &#x27;ClassData&#x27;</span><br><span class="line">  static const ClassData _class_data_;</span><br><span class="line">               ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1152:43: error: no type named &#x27;ClassData&#x27; in &#x27;google::protobuf::Message&#x27;</span><br><span class="line">  const ::PROTOBUF_NAMESPACE_ID::Message::ClassData*GetClassData() const final;</span><br><span class="line">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1032:7: warning: abstract class is marked &#x27;final&#x27; [-Wabstract-final-class]</span><br><span class="line">class BlobShape final :</span><br><span class="line">      ^</span><br><span class="line">/usr/local/include/google/protobuf/message.h:237:12: note: unimplemented pure virtual method &#x27;New&#x27; in &#x27;BlobShape&#x27;</span><br><span class="line">  Message* New() const override = 0;</span><br><span class="line">           ^</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.cc:4:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1051:9: error: use of undeclared identifier &#x27;GetOwningArena&#x27;</span><br><span class="line">    if (GetOwningArena() == from.GetOwningArena()</span><br><span class="line">        ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1051:34: error: no member named &#x27;GetOwningArena&#x27; in &#x27;opencv_caffe::BlobShape&#x27;</span><br><span class="line">    if (GetOwningArena() == from.GetOwningArena()</span><br><span class="line">                            ~~~~ ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1098:9: error: use of undeclared identifier &#x27;GetOwningArena&#x27;</span><br><span class="line">    if (GetOwningArena() == other-&gt;GetOwningArena()) &#123;</span><br><span class="line">        ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1098:36: error: no member named &#x27;GetOwningArena&#x27; in &#x27;opencv_caffe::BlobShape&#x27;</span><br><span class="line">    if (GetOwningArena() == other-&gt;GetOwningArena()) &#123;</span><br><span class="line">                            ~~~~~  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1107:19: error: use of undeclared identifier &#x27;GetOwningArena&#x27;</span><br><span class="line">    GOOGLE_DCHECK(GetOwningArena() == other-&gt;GetOwningArena());</span><br><span class="line">                  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1107:46: error: no member named &#x27;GetOwningArena&#x27; in &#x27;opencv_caffe::BlobShape&#x27;</span><br><span class="line">    GOOGLE_DCHECK(GetOwningArena() == other-&gt;GetOwningArena());</span><br><span class="line">                                      ~~~~~  ^</span><br><span class="line">/usr/local/include/google/protobuf/stubs/logging.h:181:61: note: expanded from macro &#x27;GOOGLE_DCHECK&#x27;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">define GOOGLE_DCHECK(EXPRESSION) <span class="keyword">while</span>(<span class="literal">false</span>) GOOGLE_CHECK(EXPRESSION)</span></span><br><span class="line">                                                            ^~~~~~~~~~</span><br><span class="line">/usr/local/include/google/protobuf/stubs/logging.h:154:26: note: expanded from macro &#x27;GOOGLE_CHECK&#x27;</span><br><span class="line">  GOOGLE_LOG_IF(FATAL, !(EXPRESSION)) &lt;&lt; &quot;CHECK failed: &quot; #EXPRESSION &quot;: &quot;</span><br><span class="line">                         ^~~~~~~~~~</span><br><span class="line">/usr/local/include/google/protobuf/stubs/logging.h:151:5: note: expanded from macro &#x27;GOOGLE_LOG_IF&#x27;</span><br><span class="line">  !(CONDITION) ? (void)0 : GOOGLE_LOG(LEVEL)</span><br><span class="line">    ^~~~~~~~~</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.cc:4:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1204:67: error: no type named &#x27;ConstantInitialized&#x27; in namespace &#x27;google::protobuf::internal&#x27;</span><br><span class="line">  explicit constexpr BlobProto(::PROTOBUF_NAMESPACE_ID::internal::ConstantInitialized);</span><br><span class="line">                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1318:16: error: unknown type name &#x27;ClassData&#x27;</span><br><span class="line">  static const ClassData _class_data_;</span><br><span class="line">               ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1319:43: error: no type named &#x27;ClassData&#x27; in &#x27;google::protobuf::Message&#x27;</span><br><span class="line">  const ::PROTOBUF_NAMESPACE_ID::Message::ClassData*GetClassData() const final;</span><br><span class="line">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1438:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_raw_data();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1438:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_raw_data();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1438:33: error: expected &#x27;;&#x27; at end of declaration list</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_raw_data();</span><br><span class="line">                                ^</span><br><span class="line">                                ;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/caffe/opencv-caffe.pb.h:1453:3: error: use of undeclared identifier &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD ::opencv_caffe::BlobShape* release_shape();</span><br><span class="line">  ^</span><br><span class="line">fatal error: too many errors emitted, stopping now [-ferror-limit=]</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.cc:4:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:12:2: error: This file was generated by a newer version of protoc which is</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error This file was generated by a newer version of protoc <span class="built_in">which</span> is</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error incompatible with your Protocol Buffer headers. Please update</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:14:2: error: your headers.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error your headers.</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:216:72: error: no type named &#x27;ConstantInitialized&#x27; in namespace &#x27;google::protobuf::internal&#x27;</span><br><span class="line">  explicit constexpr AttributeProto(::PROTOBUF_NAMESPACE_ID::internal::ConstantInitialized);</span><br><span class="line">                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:330:16: error: unknown type name &#x27;ClassData&#x27;</span><br><span class="line">  static const ClassData _class_data_;</span><br><span class="line">               ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:331:43: error: no type named &#x27;ClassData&#x27; in &#x27;google::protobuf::Message&#x27;</span><br><span class="line">  const ::PROTOBUF_NAMESPACE_ID::Message::ClassData*GetClassData() const final;</span><br><span class="line">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:517:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:517:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:517:33: error: expected &#x27;;&#x27; at end of declaration list</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                                ^</span><br><span class="line">                                ;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:535:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_s();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:535:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_s();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:535:27: error: duplicate member &#x27;string&#x27;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:517:27: note: previous declaration is here</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                          ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:535:33: error: expected &#x27;;&#x27; at end of declaration list</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_s();</span><br><span class="line">                                ^</span><br><span class="line">                                ;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:553:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_doc_string();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:553:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_doc_string();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:553:27: error: duplicate member &#x27;string&#x27;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:517:27: note: previous declaration is here</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                          ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:553:33: error: expected &#x27;;&#x27; at end of declaration list</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_doc_string();</span><br><span class="line">                                ^</span><br><span class="line">                                ;</span><br><span class="line">[ 42%] Building CXX object modules/dnn/CMakeFiles/opencv_dnn.dir/misc/tensorflow/attr_value.pb.cc.o</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:571:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_ref_attr_name();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/onnx/opencv-onnx.pb.h:571:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_ref_attr_name();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">fatal error: too many errors emitted, stopping now [-ferror-limit=]</span><br><span class="line">1 warning and 20 errors generated.</span><br><span class="line">20 errors generated.</span><br><span class="line">make[2]: *** [modules/dnn/CMakeFiles/opencv_dnn.dir/misc/onnx/opencv-onnx.pb.cc.o] Error 1</span><br><span class="line">make[2]: *** Waiting for unfinished jobs....</span><br><span class="line">make[2]: *** [modules/dnn/CMakeFiles/opencv_dnn.dir/misc/caffe/opencv-caffe.pb.cc.o] Error 1</span><br><span class="line">[ 42%] Building CXX object modules/photo/CMakeFiles/opencv_photo.dir/src/contrast_preserve.cpp.o</span><br><span class="line">[ 42%] Building CXX object modules/imgcodecs/CMakeFiles/opencv_imgcodecs.dir/src/grfmt_bmp.cpp.o</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.cc:4:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.h:12:2: error: This file was generated by a newer version of protoc which is</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error This file was generated by a newer version of protoc <span class="built_in">which</span> is</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error incompatible with your Protocol Buffer headers. Please update</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.h:14:2: error: your headers.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error your headers.</span></span><br><span class="line"> ^</span><br><span class="line">[ 42%] Building CXX object modules/imgcodecs/CMakeFiles/opencv_imgcodecs.dir/src/grfmt_exr.cpp.o</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.cc:4:</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.h:37:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor.pb.h:12:2: error: This file was generated by a newer version of protoc which is</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error This file was generated by a newer version of protoc <span class="built_in">which</span> is</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error incompatible with your Protocol Buffer headers. Please update</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor.pb.h:14:2: error: your headers.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error your headers.</span></span><br><span class="line"> ^</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.cc:4:</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/attr_value.pb.h:37:</span><br><span class="line">In file included from /Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor.pb.h:34:</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:12:2: error: This file was generated by a newer version of protoc which is</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error This file was generated by a newer version of protoc <span class="built_in">which</span> is</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error incompatible with your Protocol Buffer headers. Please update</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:14:2: error: your headers.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">error your headers.</span></span><br><span class="line"> ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:77:78: error: no type named &#x27;ConstantInitialized&#x27; in namespace &#x27;google::protobuf::internal&#x27;</span><br><span class="line">  explicit constexpr TensorShapeProto_Dim(::PROTOBUF_NAMESPACE_ID::internal::ConstantInitialized);</span><br><span class="line">                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:184:16: error: unknown type name &#x27;ClassData&#x27;</span><br><span class="line">  static const ClassData _class_data_;</span><br><span class="line">               ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:185:43: error: no type named &#x27;ClassData&#x27; in &#x27;google::protobuf::Message&#x27;</span><br><span class="line">  const ::PROTOBUF_NAMESPACE_ID::Message::ClassData*GetClassData() const final;</span><br><span class="line">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:203:3: error: unknown type name &#x27;PROTOBUF_NODISCARD&#x27;</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">  ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:203:27: error: non-friend class member &#x27;string&#x27; cannot have a qualified name</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                     ~~~~~^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:203:33: error: expected &#x27;;&#x27; at end of declaration list</span><br><span class="line">  PROTOBUF_NODISCARD std::string* release_name();</span><br><span class="line">                                ^</span><br><span class="line">                                ;</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:91:9: error: use of undeclared identifier &#x27;GetOwningArena&#x27;</span><br><span class="line">    if (GetOwningArena() == from.GetOwningArena()</span><br><span class="line">        ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:91:34: error: no member named &#x27;GetOwningArena&#x27; in &#x27;opencv_tensorflow::TensorShapeProto_Dim&#x27;</span><br><span class="line">    if (GetOwningArena() == from.GetOwningArena()</span><br><span class="line">                            ~~~~ ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:131:9: error: use of undeclared identifier &#x27;GetOwningArena&#x27;</span><br><span class="line">    if (GetOwningArena() == other-&gt;GetOwningArena()) &#123;</span><br><span class="line">        ^</span><br><span class="line">/Users/frewen/03.ProgramStudy/20.AI/04.Resource/opencv-library/opencv4.7.0/opencv-4.7.0/modules/dnn/misc/tensorflow/tensor_shape.pb.h:131:36: error: no member named &#x27;GetOwningArena&#x27; in &#x27;opencv_tensorflow::TensorShapeProto_Dim&#x27;</span><br><span class="line">    if (GetOwningArena() == other-&gt;GetOwningArena()) &#123;</span><br><span class="line">                            ~~~~~  ^</span><br><span class="line">fatal error: too many errors emitted, stopping now [-ferror-limit=]</span><br></pre></td></tr></table></figure>

<p>解决方案：</p>
<p>编译又出现了问题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFReadRGBAStrip@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFSetErrorHandler@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFReadEncodedStrip@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFReadRGBATile@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFClientOpen@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFSetField@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFScanlineSize@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFSetWarningHandler@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFWriteDirectory@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFWriteScanline@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFRGBAImageOK@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFReadDirectory@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFIsTiled@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFReadEncodedTile@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFClose@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFWriteEncodedStrip@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFGetField@LIBTIFF_4.0&#x27;</span><br><span class="line">/usr/bin/ld: ../../lib/libopencv_imgcodecs.so.4.6.0: undefined reference to `TIFFOpen@LIBTIFF_4.0&#x27;</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br><span class="line">apps/annotation/CMakeFiles/opencv_annotation.dir/build.make:88: recipe for target &#x27;bin/opencv_annotation&#x27; failed</span><br><span class="line">make[2]: *** [bin/opencv_annotation] Error 1</span><br><span class="line">CMakeFiles/Makefile2:3375: recipe for target &#x27;apps/annotation/CMakeFiles/opencv_annotation.dir/all&#x27; failed</span><br><span class="line">make[1]: *** [apps/annotation/CMakeFiles/opencv_annotation.dir/all] Error 2</span><br><span class="line">make[1]: *** Waiting for unfinished jobs....</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;libopencv_imgcodecs.so.3.4：对‘<a href="mailto:&#x54;&#x49;&#x46;&#x46;&#x52;&#101;&#97;&#100;&#82;&#71;&#66;&#x41;&#x53;&#x74;&#x72;&#x69;&#x70;&#64;&#x4c;&#x49;&#x42;&#84;&#73;&#x46;&#70;&#x5f;&#52;&#46;&#x30;">&#x54;&#x49;&#x46;&#x46;&#x52;&#101;&#97;&#100;&#82;&#71;&#66;&#x41;&#x53;&#x74;&#x72;&#x69;&#x70;&#64;&#x4c;&#x49;&#x42;&#84;&#73;&#x46;&#70;&#x5f;&#52;&#46;&#x30;</a>’未定义的引用<br>原因：TIFF的库发生了冲突<br>解决办法：conda remove libtiff</p>
<p>我是装了conda的，对我来说是这样解决，网上很多解决不了。亲测有效。参考文献：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/laowangxieboke/p/12680821.html">https://www.cnblogs.com/laowangxieboke/p/12680821.html</a></p>
<h2 id="QNX版本编译"><a href="#QNX版本编译" class="headerlink" title="QNX版本编译"></a>QNX版本编译</h2><p>设置QNX编译工具链路径：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QNX_TOOLCHAIN=./cmake/arm-unknown-nto-qnx700eabi.toolchain.cmake</span><br></pre></td></tr></table></figure>

<p>编写编译QNX的脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">elif [ &quot;$TARGET&quot; = &quot;qnx-armv7le&quot; ]; then</span><br><span class="line">  echo &quot;===== cmake target: qnx-armv7le&quot;</span><br><span class="line">   cmake   -DCMAKE_BUILD_TYPE=$BUILD_TYPE \</span><br><span class="line">           -DCMAKE_CXX_FLAGS=&quot;-std=c++11 -frtti -fexceptions&quot; \</span><br><span class="line">           -DCMAKE_TOOLCHAIN_FILE=$QNX_TOOLCHAIN \</span><br><span class="line">           -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR \</span><br><span class="line">           `cat ../../../opencv4_cmake_options.txt` \</span><br><span class="line">           ../..</span><br><span class="line"></span><br><span class="line">elif [ &quot;$TARGET&quot; = &quot;qnx-aarch64le&quot; ]; then</span><br><span class="line">  echo &quot;===== cmake target: qnx-aarch64le&quot;</span><br><span class="line">  cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE \</span><br><span class="line">        -DCMAKE_CXX_FLAGS=&quot;-std=c++11 -frtti -fexceptions&quot; \</span><br><span class="line">        -DCMAKE_TOOLCHAIN_FILE=$QNX_TOOLCHAIN \</span><br><span class="line">        -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR \</span><br><span class="line">        `cat ../../opencv4_cmake_options.txt` \</span><br><span class="line">        ../..</span><br></pre></td></tr></table></figure>









<h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><p>编写一个 OpenCV 版本的 Hello World</p>
<p>上面的配置做完之后，我们来创建一个 HelloWorld 的项目</p>
<p>新创建的项目，默认使用 CMake 进行构建。因此，需要修改一下 CMakeLists.txt 文件</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(HelloWorld)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#find_library(OpenCV)</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenCV)</span><br><span class="line"><span class="keyword">include_directories</span>( <span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(HelloWorld main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(HelloWorld <span class="variable">$&#123;OpenCV_LIBS&#125;</span>)</span><br></pre></td></tr></table></figure>



<p>其中，需要注意的是</p>
<ul>
<li>find_package 是用于查找依赖包。</li>
<li>include_directories 是用于添加 Headers 搜索路径，在这里将 OpenCV 的头文件添加到 include 路径。</li>
<li>add_executable 是为工程生成一个可执行文件，并指定所使用的源文件。</li>
</ul>
<p>add_executable 常用的语法如下：</p>
<blockquote>
<p> add_executable(<name> [WIN32] [MACOSX_BUNDLE] [EXCLUDE_FROM_ALL] source1 source2 … sourceN) </p>
</blockquote>
<p><name> 是生成的可执行目标文件，会根据本地平台创建出来。</p>
<ul>
<li>target_link_libraries 是为了将目标文件与库文件进行链接。</li>
</ul>
<p>target_link_libraries 常用的语法如下：</p>
<blockquote>
<p> target_link_libraries(<target> [item1] [item2] […] [[debug|optimized|general] <item>] …) </p>
</blockquote>
<p><target>  是 add_executable 生成的目标文件。OpenCV_LIBS 是一个可执行文件的变量，表示 可以链接 OpenCV 库。</p>
<p>然后修改 main.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Mat image = <span class="built_in">imread</span>(<span class="string">&quot;test.jpg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Image not loaded&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;image&quot;</span>, image);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，将 test.jpg 文件放在工程中，就可以编译了。</p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake .</span><br></pre></td></tr></table></figure>

<p>然后再执行命令，用于生成可执行文件</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>

<p>生成可执行文件.jpeg</p>
<p>对于已经生成好的可执行文件，通过如下命令来执行，就可以把图片展示出来了。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./HelloWorld</span><br></pre></td></tr></table></figure>

<p>每次修改 C++ 代码，只需要执行 make 即可。</p>
<p>对于一些常见的错误，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Undefined symbols for architecture x86_64:</span><br><span class="line">  &quot;__ZN2cv6imreadERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEi&quot;, referenced from:</span><br><span class="line">      _main in main.cpp.o</span><br><span class="line">  &quot;__ZN2cv6imshowERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERKNS_11_InputArrayE&quot;, referenced from:</span><br><span class="line">      _main in main.cpp.o</span><br><span class="line">ld: symbol(s) not found for architecture x86_64</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br></pre></td></tr></table></figure>

<p>可以删除 CMakeCache.txt 文件，然后重新 make 一下即可。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.frewen.wang">Frewen.Wang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.frewen.wang/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">http://www.frewen.wang/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.frewen.wang" target="_blank">麦溪·在路上</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/">四大组件</a><a class="post-meta__tags" href="/tags/Activity/">Activity</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="/img/frewen_tech.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat_square.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat_square.jpg" alt="微信打赏"/></a><div class="post-qr-code-desc">微信打赏</div></li><li class="reward-item"><a href="/img/alipay_square.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay_square.jpg" alt="支付宝打赏"/></a><div class="post-qr-code-desc">支付宝打赏</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/20/01.AuraTechNotes/20.AILearning/08.SNPE%E7%9A%84%E5%AD%A6%E4%B9%A0/08.%E7%AE%97%E6%B3%95%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" title="算法模型转换"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">算法模型转换</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/01.OpenCV%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux系统上常用软件集锦</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/07/20/01.AuraTechNotes/14.WebLearn/05.UniApp%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/01.UniApp%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="UniApp的环境搭建"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">UniApp的环境搭建</div></div></a></div><div><a href="/2020/07/20/01.AuraTechNotes/16.Linux/04.Linux%E4%B9%8Bvim%E7%BC%96%E8%BE%91%E5%99%A8/01.Linux%E4%B9%8Bvim%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">Linux系统上常用软件集锦</div></div></a></div><div><a href="/2020/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/01.Linux%E7%B3%BB%E7%BB%9F%E4%B8%8A%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E9%9B%86%E9%94%A6/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">Linux系统上常用软件集锦</div></div></a></div><div><a href="/2020/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/02.Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">Linux系统上常用软件集锦</div></div></a></div><div><a href="/2020/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/03.Windows%E5%92%8CLinux%E5%8F%8C%E7%B3%BB%E7%BB%9F%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">Linux系统上常用软件集锦</div></div></a></div><div><a href="/2020/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/06.MacOS%E7%94%A8Parallels%20Desktop%E5%AE%89%E8%A3%85Ubuntu/" title="Linux系统上常用软件集锦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-20</div><div class="title">Linux系统上常用软件集锦</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Valine</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/frewen_tech.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Frewen.Wang</div><div class="author-info__description">在青麦地上跑着,雪和太阳的光芒</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">864</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">158</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/FrewenWang"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/FrewenWang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:frewen1225@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://plus.google.com/FrewenWong" target="_blank" title="Google"><i class="fa-brands fa-google"></i></a><a class="social-icon" href="https://twitter.com/FrewenWong" target="_blank" title="Twitter"><i class="fa-brands fa-twitter"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MacOS%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85OpenCV"><span class="toc-number">2.</span> <span class="toc-text">MacOS编译安装OpenCV</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.1.</span> <span class="toc-text">源码下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%BC%96%E8%AF%91"><span class="toc-number">2.2.</span> <span class="toc-text">图形化编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BC%96%E8%AF%91"><span class="toc-number">2.3.</span> <span class="toc-text">命令行编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MacOS%E7%B3%BB%E7%BB%9F%E4%B8%8A%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91"><span class="toc-number">2.3.1.</span> <span class="toc-text">MacOS系统上源码编译</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDcontrib%E7%9A%84%E6%BA%90%E7%A0%81"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">下载contrib的源码</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ubuntu%E4%B8%8A%E6%90%AD%E5%BB%BAOpenCV%E7%8E%AF%E5%A2%83%EF%BC%88Ubuntu20-04%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">Ubuntu上搭建OpenCV环境（Ubuntu20.04）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Anaconda%E5%AE%89%E8%A3%85OpenCV"><span class="toc-number">4.</span> <span class="toc-text">Anaconda安装OpenCV</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95"><span class="toc-number">4.0.1.</span> <span class="toc-text">解決方法:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MacOS%E5%AE%89%E8%A3%85OpenCV"><span class="toc-number">5.</span> <span class="toc-text">MacOS安装OpenCV</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Homebrew%E5%AE%89%E8%A3%85"><span class="toc-number">5.1.</span> <span class="toc-text">Homebrew安装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">归纳总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenCV%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91"><span class="toc-number">7.</span> <span class="toc-text">OpenCV源码编译</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E7%89%88%E6%9C%AC%E7%BC%96%E8%AF%91"><span class="toc-number">7.1.</span> <span class="toc-text">Linux版本编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Ubuntu%E5%AE%89%E8%A3%85opencv-python"><span class="toc-number">7.1.1.</span> <span class="toc-text">Ubuntu安装opencv_python</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MacOS%E7%89%88%E6%9C%AC%E7%BC%96%E8%AF%91"><span class="toc-number">7.2.</span> <span class="toc-text">MacOS版本编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E7%89%88%E6%9C%AC%E7%BC%96%E8%AF%91-1"><span class="toc-number">7.3.</span> <span class="toc-text">Linux版本编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QNX%E7%89%88%E6%9C%AC%E7%BC%96%E8%AF%91"><span class="toc-number">7.4.</span> <span class="toc-text">QNX版本编译</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hello-World"><span class="toc-number">8.</span> <span class="toc-text">Hello World</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">8.1.</span> <span class="toc-text">编译</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/22/01.AuraTechNotes/16.Linux/03.Linux%E4%B9%8Bshell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/18.shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%AE%9E%E4%BE%8B%E5%A4%87%E4%BB%BD/" title="无题">无题</a><time datetime="2023-12-22T13:48:40.121Z" title="发表于 2023-12-22 21:48:40">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/28/01.AuraTechNotes/09.Python/12.python%E7%9A%84pycharm%E7%9A%84%E4%BD%BF%E7%94%A8/01.pycharm%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="无题">无题</a><time datetime="2023-07-28T11:06:28.000Z" title="发表于 2023-07-28 19:06:28">2023-07-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/27/01.AuraTechNotes/09.Python/11.python%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/01.python%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="无题">无题</a><time datetime="2023-07-27T02:02:00.000Z" title="发表于 2023-07-27 10:02:00">2023-07-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/20/01.AuraTechNotes/16.Linux/01.Linux%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/01.%E5%9F%BA%E4%BA%8EWindows11%E5%AE%89%E8%A3%85Ubuntu%E5%8F%8C%E7%B3%BB%E7%BB%9F/" title="基于Windows11安装Ubuntu双系统">基于Windows11安装Ubuntu双系统</a><time datetime="2023-07-19T16:00:00.000Z" title="发表于 2023-07-20 00:00:00">2023-07-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/17/01.AuraTechNotes/09.Python/01.python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/12.%E6%90%AD%E5%BB%BAbaidu%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" title="无题">无题</a><time datetime="2023-07-17T12:35:38.000Z" title="发表于 2023-07-17 20:35:38">2023-07-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Frewen.Wang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://www.frewen.wang/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/'
    this.page.identifier = '/2020/07/20/01.AuraTechNotes/20.AILearning/09.OpenCV%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/02.OpenCV%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/'
    this.page.title = 'Linux系统上常用软件集锦'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Valine' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      GLOBAL_CONFIG_SITE.isPost && getCount()
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>